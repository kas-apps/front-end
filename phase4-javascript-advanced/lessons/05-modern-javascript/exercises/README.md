# 演習問題：モダンJavaScript ✨

この演習では、モダンJavaScriptの記法を実際に使って、理解を深めるよ！

**学習のポイント**：

- スプレッド構文を使いこなす
- 分割代入でコードを簡潔に書く
- オプショナルチェイニングで安全なコードを書く
- 配列メソッド（map/filter/reduce）を使いこなす
- 古いコードをモダンな記法にリファクタリングする

---

## 基礎編（3問）

まずは基本的な記法を練習しよう！

### 演習 5-1: スプレッド構文の練習

**目標**：スプレッド構文を使って、配列とオブジェクトを操作できるようになる

**課題**：

以下の機能を実装してください：

1. **配列のマージ**

   - 2つの配列を結合した新しい配列を作成
   - 元の配列は変更しない

2. **配列への要素追加**

   - 既存の配列の先頭と末尾に要素を追加した新しい配列を作成

3. **オブジェクトのマージ**

   - デフォルト設定とユーザー設定をマージ
   - ユーザー設定が優先される

4. **オブジェクトのプロパティ更新**
   - ユーザー情報の一部だけを更新した新しいオブジェクトを作成
   - 元のオブジェクトは変更しない

**ヒント**：

- `...` を使って配列やオブジェクトを展開
- スプレッド構文の順番に注意（後に書いた方が優先される）

**実装してほしい機能**：

- ボタンをクリックすると、各操作の結果がコンソールと画面に表示される
- Before（元のデータ）と After（操作後のデータ）を比較できる

---

### 演習 5-2: 分割代入の練習

**目標**：配列とオブジェクトの分割代入を使いこなせるようになる

**課題**：

以下の機能を実装してください：

1. **配列の分割代入**

   - 配列から最初の2つの要素と、残りの要素を取り出す
   - デフォルト値を設定する

2. **オブジェクトの分割代入**

   - ユーザー情報から必要なプロパティだけを取り出す
   - 変数名を変更する（name → userName）
   - デフォルト値を設定する

3. **ネストされたオブジェクトの分割代入**

   - ユーザーの住所情報を取り出す

4. **関数の引数で分割代入**
   - ユーザー情報を受け取る関数で、引数の時点で分割代入

**ヒント**：

- `const [a, b, ...rest] = array`
- `const { name, age } = user`
- `const { name: userName } = user`（変数名の変更）
- `const { city = '未登録' } = user`（デフォルト値）

**実装してほしい機能**：

- 各パターンの分割代入の結果を画面に表示
- コンソールにも結果を出力して、動作を確認できる

---

### 演習 5-3: オプショナルチェイニングの練習

**目標**：オプショナルチェイニングとNullish合体演算子を使って、安全なコードが書けるようになる

**課題**：

APIから取得したユーザーデータを安全に扱う機能を実装してください：

1. **オプショナルチェイニング（`?.`）**

   - ネストされたプロパティに安全にアクセス
   - データがない場合もエラーにならない

2. **Nullish合体演算子（`??`）**

   - デフォルト値を設定
   - 0や空文字も有効な値として扱う

3. **2つの組み合わせ**
   - `?.` と `??` を組み合わせて、安全にデータを取得してデフォルト値を設定

**ヒント**：

- `user?.profile?.name`（途中がundefinedでもエラーにならない）
- `value ?? 'デフォルト'`（null/undefinedの場合のみデフォルト値）
- `user?.profile?.name ?? 'ゲスト'`（組み合わせ）

**実装してほしい機能**：

- 複数のユーザーデータ（完全なデータ、不完全なデータ、null）を用意
- それぞれに対して、オプショナルチェイニングとNullish合体演算子を使って情報を表示
- エラーが起きないことを確認

---

## 応用編（3問）

基礎ができたら、実践的な課題に挑戦しよう！

### 演習 5-4: 配列メソッドを使ったデータ変換

**目標**：map、filter、reduceを使って、複雑なデータ操作ができるようになる

**課題**：

商品データの配列を使って、以下の機能を実装してください：

1. **map で変換**

   - 全商品に10%の割引を適用した新しい配列を作成
   - 商品名と価格だけを持つ簡略版オブジェクトの配列を作成

2. **filter で絞り込み**

   - 価格が1000円以上の商品だけを抽出
   - 在庫が10個以上ある商品だけを抽出

3. **reduce で集計**

   - 全商品の合計金額を計算
   - カテゴリ別に商品数をカウント

4. **メソッドチェイン**
   - 在庫がある商品で、価格が安い順にソートして、上位3つを表示

**データ例**：

```javascript
const products = [
  { id: 1, name: 'ノートPC', price: 120000, stock: 5, category: '電子機器' },
  { id: 2, name: 'マウス', price: 3000, stock: 20, category: '周辺機器' },
  { id: 3, name: 'キーボード', price: 8000, stock: 15, category: '周辺機器' },
  { id: 4, name: 'モニター', price: 35000, stock: 8, category: '電子機器' },
  { id: 5, name: 'USBケーブル', price: 500, stock: 50, category: '周辺機器' },
];
```

**ヒント**：

- `map((product) => ({ ...product, price: product.price * 0.9 }))`
- `filter((product) => product.price >= 1000)`
- `reduce((sum, product) => sum + product.price, 0)`
- メソッドチェイン：`.filter(...).sort(...).slice(0, 3)`

**実装してほしい機能**：

- ボタンをクリックすると、各操作の結果が画面に表示される
- 結果を見やすく整形して表示（テーブルやリストで）

---

### 演習 5-5: オブジェクト操作（スプレッド構文と分割代入の組み合わせ）

**目標**：スプレッド構文と分割代入を組み合わせて、複雑なオブジェクト操作ができるようになる

**課題**：

ユーザー管理システムの機能を実装してください：

1. **ユーザー情報の更新**

   - 既存のユーザー情報の一部を更新する関数
   - スプレッド構文を使ってイミュータブルに実装

2. **ユーザー情報のマージ**

   - 複数のデータソースからユーザー情報をマージ
   - デフォルト値 → プロフィール情報 → ユーザー設定の順で優先

3. **ネストされたオブジェクトの更新**

   - 住所情報だけを更新する
   - 他の情報は変更しない

4. **オブジェクトから一部を除外**
   - パスワードなどの機密情報を除外した新しいオブジェクトを作成
   - 分割代入とスプレッド構文の組み合わせ

**データ例**：

```javascript
const user = {
  id: 1,
  name: '太郎',
  email: 'taro@example.com',
  password: 'secret123',
  profile: {
    age: 25,
    city: '東京',
    bio: 'よろしくお願いします',
  },
  settings: {
    theme: 'light',
    language: 'ja',
  },
};
```

**ヒント**：

- 更新：`{ ...user, name: '花子' }`
- ネスト更新：`{ ...user, profile: { ...user.profile, city: '大阪' } }`
- 除外：`const { password, ...userWithoutPassword } = user`

**実装してほしい機能**：

- フォームで情報を入力して更新できる
- 更新前と更新後のデータを比較表示
- 元のオブジェクトが変更されていないことを確認（コンソールに出力）

---

### 演習 5-6: 古いコードをモダンな記法にリファクタリング（AIと協働）

**目標**：古い書き方のコードを、モダンな記法にリファクタリングできるようになる

**課題**：

以下の古い書き方のコードを、モダンな記法に書き直してください：

**古いコード（リファクタリング前）**：

```javascript
// 昔の書き方
var users = [
  { name: '太郎', age: 25, city: '東京' },
  { name: '花子', age: 30, city: '大阪' },
  { name: '次郎', age: 28, city: '福岡' },
];

// 1. 年齢が25歳以上のユーザーの名前を取得
var result = [];
for (var i = 0; i < users.length; i++) {
  if (users[i].age >= 25) {
    result.push(users[i].name);
  }
}

// 2. ユーザー情報を表示
function displayUser(user) {
  var name = user.name;
  var age = user.age;
  var city = user.city;
  var message = 'こんにちは、' + name + 'さん！' + age + '歳、' + city + '在住';
  return message;
}

// 3. 設定のマージ
var defaultSettings = { theme: 'light', fontSize: 14 };
var userSettings = { fontSize: 18 };
var settings = Object.assign({}, defaultSettings, userSettings);

// 4. 安全なプロパティアクセス
function getCity(user) {
  if (user && user.profile && user.profile.address) {
    return user.profile.address.city;
  }
  return '不明';
}
```

**やること**：

1. `var` → `const`/`let` に変更
2. for 文 → 配列メソッドに変更
3. 文字列結合 → テンプレートリテラルに変更
4. Object.assign → スプレッド構文に変更
5. if 文でのnullチェック → オプショナルチェイニングに変更
6. 関数の引数で分割代入を使う

**AIへの指示例**：

```text
「以下のコードをES6以降のモダンな記法にリファクタリングしてください：
- varをconstまたはletに変更
- for文を配列メソッド（filter、map）に変更
- 文字列結合をテンプレートリテラルに変更
- Object.assignをスプレッド構文に変更
- nullチェックをオプショナルチェイニングに変更
- 関数の引数で分割代入を使用

[古いコードを貼り付け]
```

**実装してほしい機能**：

- 古いコードと新しいコード（リファクタリング後）の両方を実装
- 両方の実行結果が同じになることを確認
- コードの行数、読みやすさを比較できる

---

## チャレンジ編（1問）

すべての機能を組み合わせた実践的なアプリを作ろう！

### 演習 5-7: ユーザープロフィールエディタ（モダンJavaScript総まとめ）

**目標**：モダンJavaScriptのすべての機能を使って、実用的なアプリを作る

**課題**：

ユーザープロフィールエディタを作成してください。以下の機能を実装：

1. **ユーザー情報の表示**

   - 複数のユーザーをリストで表示
   - オプショナルチェイニングで安全にデータを取得
   - テンプレートリテラルでHTMLを生成

2. **ユーザー情報の編集**

   - ユーザーを選択すると、フォームに情報が表示される
   - フォームで情報を編集できる
   - 保存ボタンで情報を更新（スプレッド構文でイミュータブルに）

3. **フィルタリング機能**

   - 年齢や都市で絞り込み
   - 配列メソッド（filter）を使用

4. **統計情報の表示**

   - ユーザー数、平均年齢、都市別の人数
   - reduce を使って集計

5. **新規ユーザーの追加**

   - フォームから新しいユーザーを追加
   - スプレッド構文で既存の配列に追加

6. **データのインポート/エクスポート**
   - JSON形式でデータをエクスポート
   - JSON形式のデータをインポート

**使う技術**：

- ✅ スプレッド構文（配列・オブジェクトの操作）
- ✅ 分割代入（データの取り出し）
- ✅ オプショナルチェイニング（安全なアクセス）
- ✅ Nullish合体演算子（デフォルト値）
- ✅ テンプレートリテラル（HTML生成）
- ✅ 配列メソッド（map、filter、reduce）
- ✅ アロー関数（イベントハンドラ）
- ✅ 短絡評価（条件付きレンダリング）

**初期データ例**：

```javascript
const users = [
  {
    id: 1,
    name: '太郎',
    age: 25,
    email: 'taro@example.com',
    profile: {
      city: '東京',
      bio: 'エンジニアです',
    },
  },
  {
    id: 2,
    name: '花子',
    age: 30,
    email: 'hanako@example.com',
    profile: {
      city: '大阪',
      bio: 'デザイナーです',
    },
  },
  // ... 他のユーザー
];
```

**実装してほしい機能**：

1. **ユーザーリスト表示**

   - ユーザーをカード形式で表示
   - 各カードに「編集」「削除」ボタン

2. **編集フォーム**

   - ユーザーを選択すると、フォームに情報が入る
   - 保存すると、リストに反映される
   - キャンセルすると、元に戻る

3. **フィルタ**

   - 都市で絞り込み
   - 年齢範囲で絞り込み

4. **統計パネル**

   - 総ユーザー数
   - 平均年齢
   - 都市別の人数

5. **見た目**
   - 美しいUI（カード、フォーム、ボタン）
   - レスポンシブデザイン

**ヒント**：

- 状態管理：let usersData = [...users]（元のデータは変更しない）
- 編集：usersData = usersData.map(u => u.id === id ? { ...u, ...updates } : u)
- 削除：usersData = usersData.filter(u => u.id !== id)
- 追加：usersData = [...usersData, newUser]
- フィルタ：const filtered = usersData.filter(u => u.profile?.city === selectedCity)
- 統計：const avg = usersData.reduce((sum, u) => sum + u.age, 0) / usersData.length

**評価ポイント**：

- モダンな記法を使っているか（var、for文を使っていないか）
- イミュータブルな書き方ができているか
- オプショナルチェイニングで安全にデータにアクセスしているか
- 配列メソッドを効果的に使っているか
- コードが読みやすいか

---

## 演習を始める前に

### 学習の進め方

1. **基礎編から順番に**

   - まずは基礎編の3問を完成させよう
   - 各機能を確実に理解してから次へ

2. **解答例を見る前に自分で考える**

   - 最初は難しくても、自分で試行錯誤することが大事
   - 詰まったら、レッスンの内容を見返そう

3. **AIに聞いてみる**

   - 分からない部分は、AIに質問してみよう
   - 「なぜこう書くのか」を理解することが重要

4. **コードを改造してみる**
   - 解答例をコピペして終わりじゃない！
   - 自分なりにカスタマイズしてみよう

### 解答例について

すべての演習には、詳しい解答例が用意されているよ！

👉 **[解答例と解説を見る](solutions/README.md)**

解答例には、以下が含まれているよ：

- ✅ 完全に動作するコード
- ✅ 各部分の詳しい解説
- ✅ なぜその書き方をするのか
- ✅ よくある間違いと修正方法
- ✅ バイブコーダー向けのヒント

---

## Let's practice modern JavaScript! 💪✨

モダンJavaScriptは、練習すればするほど身につくよ！

楽しみながら、たくさんコードを書いてみよう！🚀
