<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ¼”ç¿’ 5-4: é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿å¤‰æ›</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      h1 {
        text-align: center;
        color: white;
        margin-bottom: 10px;
        font-size: 2.5em;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .subtitle {
        text-align: center;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 30px;
        font-size: 1.1em;
      }

      .demo-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .demo-section h2 {
        color: #fa709a;
        margin-bottom: 20px;
        font-size: 1.8em;
        border-bottom: 3px solid #fa709a;
        padding-bottom: 10px;
      }

      button {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        border: none;
        padding: 12px 30px;
        font-size: 1em;
        border-radius: 25px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 15px rgba(250, 112, 154, 0.4);
        margin: 5px;
        font-weight: bold;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(250, 112, 154, 0.6);
      }

      .code-display {
        background: #2d3748;
        color: #fee140;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        font-family: 'Courier New', monospace;
        overflow-x: auto;
        white-space: pre-wrap;
      }

      .product-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .product-table th {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: bold;
      }

      .product-table td {
        padding: 12px;
        border-bottom: 1px solid #f0f0f0;
      }

      .product-table tr:hover {
        background: #fff7e6;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .stat-box {
        background: linear-gradient(135deg, #fa709a15 0%, #fee14015 100%);
        border: 2px solid #fa709a;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        color: #fa709a;
        margin: 10px 0;
      }

      .stat-label {
        color: #666;
        font-size: 0.9em;
      }

      .product-card {
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        padding: 15px;
        margin: 10px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .product-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-color: #fa709a;
      }

      .price {
        font-size: 1.3em;
        font-weight: bold;
        color: #fa709a;
      }

      .discount-badge {
        background: #52c41a;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.9em;
        font-weight: bold;
      }

      @media (max-width: 768px) {
        .product-table {
          font-size: 0.9em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ”„ é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿å¤‰æ›</h1>
      <p class="subtitle">
        map, filter, reduce ã§ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªåœ¨ã«æ“ã‚‹ï¼
      </p>

      <div class="demo-section">
        <h2>ğŸ›ï¸ å•†å“ãƒ‡ãƒ¼ã‚¿</h2>
        <div id="productsDisplay"></div>
      </div>

      <div class="demo-section">
        <h2>ğŸ¯ æ“ä½œãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
        <div>
          <button onclick="showMapExamples()">ğŸ“¦ map ã§å¤‰æ›</button>
          <button onclick="showFilterExamples()">ğŸ” filter ã§çµã‚Šè¾¼ã¿</button>
          <button onclick="showReduceExamples()">ğŸ“Š reduce ã§é›†è¨ˆ</button>
          <button onclick="showMethodChain()">â›“ï¸ ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³</button>
          <button onclick="runAll()">ğŸš€ ã™ã¹ã¦å®Ÿè¡Œ</button>
        </div>
        <div id="result"></div>
      </div>
    </div>

    <script>
      // å•†å“ãƒ‡ãƒ¼ã‚¿
      const products = [
        {
          id: 1,
          name: 'ãƒãƒ¼ãƒˆPC',
          price: 120000,
          stock: 5,
          category: 'é›»å­æ©Ÿå™¨',
        },
        { id: 2, name: 'ãƒã‚¦ã‚¹', price: 3000, stock: 20, category: 'å‘¨è¾ºæ©Ÿå™¨' },
        {
          id: 3,
          name: 'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰',
          price: 8000,
          stock: 15,
          category: 'å‘¨è¾ºæ©Ÿå™¨',
        },
        {
          id: 4,
          name: 'ãƒ¢ãƒ‹ã‚¿ãƒ¼',
          price: 35000,
          stock: 8,
          category: 'é›»å­æ©Ÿå™¨',
        },
        {
          id: 5,
          name: 'USBã‚±ãƒ¼ãƒ–ãƒ«',
          price: 500,
          stock: 50,
          category: 'å‘¨è¾ºæ©Ÿå™¨',
        },
        {
          id: 6,
          name: 'Webã‚«ãƒ¡ãƒ©',
          price: 12000,
          stock: 0,
          category: 'å‘¨è¾ºæ©Ÿå™¨',
        },
      ];

      // å•†å“ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤º
      function displayProducts(productsToShow = products, title = 'å…¨å•†å“') {
        const tableHtml = `
          <h3>${title}ï¼ˆ${productsToShow.length}ä»¶ï¼‰</h3>
          <table class="product-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>å•†å“å</th>
                <th>ä¾¡æ ¼</th>
                <th>åœ¨åº«</th>
                <th>ã‚«ãƒ†ã‚´ãƒª</th>
              </tr>
            </thead>
            <tbody>
              ${productsToShow
                .map(
                  (p) => `
                <tr>
                  <td>${p.id}</td>
                  <td>${p.name}</td>
                  <td>${p.price.toLocaleString()}å††</td>
                  <td>${p.stock}å€‹</td>
                  <td>${p.category}</td>
                </tr>
              `
                )
                .join('')}
            </tbody>
          </table>
        `;
        document.getElementById('productsDisplay').innerHTML = tableHtml;
      }

      // åˆæœŸè¡¨ç¤º
      displayProducts();

      // map ã®ä¾‹
      function showMapExamples() {
        console.clear();
        console.log('=== map ã§å¤‰æ› ===');

        // 1. 10%å‰²å¼•ã‚’é©ç”¨
        const discounted = products.map((product) => ({
          ...product,
          price: Math.floor(product.price * 0.9),
          originalPrice: product.price,
        }));

        console.log('10%å‰²å¼•é©ç”¨å¾Œ:', discounted);

        // 2. å•†å“åã¨ä¾¡æ ¼ã ã‘
        const simplified = products.map((p) => ({
          name: p.name,
          price: p.price,
        }));

        console.log('ç°¡ç•¥ç‰ˆ:', simplified);

        // 3. ä¾¡æ ¼ã‚’æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        const formatted = products.map((p) => ({
          ...p,
          priceText: `${p.price.toLocaleString()}å††`,
        }));

        console.log('ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿:', formatted);

        const code = `// 1. 10%å‰²å¼•ã‚’é©ç”¨
const discounted = products.map(product => ({
  ...product,
  price: Math.floor(product.price * 0.9),
  originalPrice: product.price
}));

// 2. å•†å“åã¨ä¾¡æ ¼ã ã‘ã‚’å–ã‚Šå‡ºã™
const simplified = products.map(p => ({
  name: p.name,
  price: p.price
}));

// 3. ä¾¡æ ¼ã‚’æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
const formatted = products.map(p => ({
  ...p,
  priceText: \`\${p.price.toLocaleString()}å††\`
}));`;

        let resultHtml = `
          <div class="code-display">${code}</div>
          <h3>ğŸ“¦ map: é…åˆ—ã®å„è¦ç´ ã‚’å¤‰æ›</h3>
          <p><strong>ç‰¹å¾´:</strong> å…ƒã®é…åˆ—ã¨åŒã˜é•·ã•ã®æ–°ã—ã„é…åˆ—ã‚’è¿”ã™</p>

          <h4 style="margin-top: 20px;">1ï¸âƒ£ 10%å‰²å¼•ã‚’é©ç”¨</h4>
          ${discounted
            .map(
              (p) => `
            <div class="product-card">
              <div>
                <strong>${p.name}</strong><br>
                <small style="color: #999;">å…ƒã®ä¾¡æ ¼: ${p.originalPrice.toLocaleString()}å††</small>
              </div>
              <div>
                <span class="discount-badge">10% OFF</span>
                <span class="price">${p.price.toLocaleString()}å††</span>
              </div>
            </div>
          `
            )
            .join('')}

          <h4 style="margin-top: 20px;">2ï¸âƒ£ å•†å“åã¨ä¾¡æ ¼ã ã‘</h4>
          <div style="padding: 15px; background: #f8f9fa; border-radius: 8px;">
            ${simplified.map((p) => `<div>â€¢ ${p.name}: ${p.price.toLocaleString()}å††</div>`).join('')}
          </div>
        `;

        document.getElementById('result').innerHTML = resultHtml;
        displayProducts(discounted, '10%å‰²å¼•é©ç”¨å¾Œã®å•†å“');
      }

      // filter ã®ä¾‹
      function showFilterExamples() {
        console.clear();
        console.log('=== filter ã§çµã‚Šè¾¼ã¿ ===');

        // 1. ä¾¡æ ¼ãŒ10000å††ä»¥ä¸Š
        const expensive = products.filter((p) => p.price >= 10000);
        console.log('10000å††ä»¥ä¸Š:', expensive);

        // 2. åœ¨åº«ãŒã‚ã‚‹å•†å“
        const inStock = products.filter((p) => p.stock > 0);
        console.log('åœ¨åº«ã‚ã‚Š:', inStock);

        // 3. é›»å­æ©Ÿå™¨ã‚«ãƒ†ã‚´ãƒª
        const electronics = products.filter((p) => p.category === 'é›»å­æ©Ÿå™¨');
        console.log('é›»å­æ©Ÿå™¨:', electronics);

        // 4. è¤‡æ•°æ¡ä»¶
        const condition = products.filter(
          (p) => p.price >= 5000 && p.stock > 10
        );
        console.log('5000å††ä»¥ä¸Š ã‹ã¤ åœ¨åº«10å€‹ä»¥ä¸Š:', condition);

        const code = `// 1. ä¾¡æ ¼ãŒ10000å††ä»¥ä¸Šã®å•†å“
const expensive = products.filter(p => p.price >= 10000);

// 2. åœ¨åº«ãŒã‚ã‚‹å•†å“
const inStock = products.filter(p => p.stock > 0);

// 3. é›»å­æ©Ÿå™¨ã‚«ãƒ†ã‚´ãƒªã®å•†å“
const electronics = products.filter(
  p => p.category === 'é›»å­æ©Ÿå™¨'
);

// 4. è¤‡æ•°æ¡ä»¶ï¼ˆä¾¡æ ¼5000å††ä»¥ä¸Š ã‹ã¤ åœ¨åº«10å€‹ä»¥ä¸Šï¼‰
const condition = products.filter(
  p => p.price >= 5000 && p.stock > 10
);`;

        const resultHtml = `
          <div class="code-display">${code}</div>
          <h3>ğŸ” filter: æ¡ä»¶ã«åˆã†è¦ç´ ã ã‘ã‚’æŠ½å‡º</h3>
          <p><strong>ç‰¹å¾´:</strong> å…ƒã®é…åˆ—ä»¥ä¸‹ã®é•·ã•ã®æ–°ã—ã„é…åˆ—ã‚’è¿”ã™</p>

          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-label">å…¨å•†å“</div>
              <div class="stat-value">${products.length}ä»¶</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">10000å††ä»¥ä¸Š</div>
              <div class="stat-value">${expensive.length}ä»¶</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">åœ¨åº«ã‚ã‚Š</div>
              <div class="stat-value">${inStock.length}ä»¶</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">é›»å­æ©Ÿå™¨</div>
              <div class="stat-value">${electronics.length}ä»¶</div>
            </div>
          </div>

          <h4>ğŸ’° 10000å††ä»¥ä¸Šã®å•†å“</h4>
          ${expensive.map((p) => `<div class="product-card"><span><strong>${p.name}</strong></span><span class="price">${p.price.toLocaleString()}å††</span></div>`).join('')}
        `;

        document.getElementById('result').innerHTML = resultHtml;
        displayProducts(expensive, '10000å††ä»¥ä¸Šã®å•†å“');
      }

      // reduce ã®ä¾‹
      function showReduceExamples() {
        console.clear();
        console.log('=== reduce ã§é›†è¨ˆ ===');

        // 1. åˆè¨ˆé‡‘é¡
        const total = products.reduce((sum, p) => sum + p.price, 0);
        console.log('åˆè¨ˆé‡‘é¡:', total);

        // 2. å¹³å‡ä¾¡æ ¼
        const average = total / products.length;
        console.log('å¹³å‡ä¾¡æ ¼:', average);

        // 3. æœ€é«˜ä¾¡æ ¼ã®å•†å“
        const mostExpensive = products.reduce((max, p) =>
          p.price > max.price ? p : max
        );
        console.log('æœ€é«˜ä¾¡æ ¼ã®å•†å“:', mostExpensive);

        // 4. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å•†å“æ•°
        const categoryCount = products.reduce((acc, p) => {
          acc[p.category] = (acc[p.category] || 0) + 1;
          return acc;
        }, {});
        console.log('ã‚«ãƒ†ã‚´ãƒªåˆ¥å•†å“æ•°:', categoryCount);

        // 5. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®åˆè¨ˆé‡‘é¡
        const categoryTotal = products.reduce((acc, p) => {
          acc[p.category] = (acc[p.category] || 0) + p.price;
          return acc;
        }, {});
        console.log('ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆè¨ˆé‡‘é¡:', categoryTotal);

        const code = `// 1. åˆè¨ˆé‡‘é¡
const total = products.reduce(
  (sum, p) => sum + p.price,
  0
);

// 2. å¹³å‡ä¾¡æ ¼
const average = total / products.length;

// 3. æœ€é«˜ä¾¡æ ¼ã®å•†å“
const mostExpensive = products.reduce(
  (max, p) => p.price > max.price ? p : max
);

// 4. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å•†å“æ•°
const categoryCount = products.reduce((acc, p) => {
  acc[p.category] = (acc[p.category] || 0) + 1;
  return acc;
}, {});

// 5. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®åˆè¨ˆé‡‘é¡
const categoryTotal = products.reduce((acc, p) => {
  acc[p.category] = (acc[p.category] || 0) + p.price;
  return acc;
}, {});`;

        const resultHtml = `
          <div class="code-display">${code}</div>
          <h3>ğŸ“Š reduce: é…åˆ—ã‚’1ã¤ã®å€¤ã«ã¾ã¨ã‚ã‚‹</h3>
          <p><strong>ç‰¹å¾´:</strong> é…åˆ—ã‚’ä»»æ„ã®å€¤ï¼ˆæ•°å€¤ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€é…åˆ—ãªã©ï¼‰ã«å¤‰æ›</p>

          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-label">åˆè¨ˆé‡‘é¡</div>
              <div class="stat-value">${total.toLocaleString()}å††</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">å¹³å‡ä¾¡æ ¼</div>
              <div class="stat-value">${Math.floor(average).toLocaleString()}å††</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">å•†å“æ•°</div>
              <div class="stat-value">${products.length}ä»¶</div>
            </div>
          </div>

          <h4>ğŸ’ æœ€é«˜ä¾¡æ ¼ã®å•†å“</h4>
          <div class="product-card" style="border: 3px solid #fa709a;">
            <span><strong>${mostExpensive.name}</strong></span>
            <span class="price">${mostExpensive.price.toLocaleString()}å††</span>
          </div>

          <h4>ğŸ“‚ ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å•†å“æ•°</h4>
          <div style="padding: 15px; background: #f8f9fa; border-radius: 8px;">
            ${Object.entries(categoryCount)
              .map(([cat, count]) => `<div>â€¢ ${cat}: ${count}ä»¶</div>`)
              .join('')}
          </div>

          <h4>ğŸ’° ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®åˆè¨ˆé‡‘é¡</h4>
          <div style="padding: 15px; background: #f8f9fa; border-radius: 8px;">
            ${Object.entries(categoryTotal)
              .map(
                ([cat, total]) =>
                  `<div>â€¢ ${cat}: ${total.toLocaleString()}å††</div>`
              )
              .join('')}
          </div>
        `;

        document.getElementById('result').innerHTML = resultHtml;
      }

      // ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã®ä¾‹
      function showMethodChain() {
        console.clear();
        console.log('=== ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ ===');

        // åœ¨åº«ãŒã‚ã‚‹å•†å“ã§ã€ä¾¡æ ¼ãŒå®‰ã„é †ã«ã‚½ãƒ¼ãƒˆã—ã¦ã€ä¸Šä½3ã¤ã‚’å–å¾—
        const top3 = products
          .filter((p) => p.stock > 0) // åœ¨åº«ãŒã‚ã‚‹
          .sort((a, b) => a.price - b.price) // ä¾¡æ ¼ãŒå®‰ã„é †
          .slice(0, 3) // ä¸Šä½3ã¤
          .map((p) => ({ name: p.name, price: p.price })); // åå‰ã¨ä¾¡æ ¼ã ã‘

        console.log('åœ¨åº«ã‚ã‚Šãƒ»ä½ä¾¡æ ¼TOP3:', top3);

        // é›»å­æ©Ÿå™¨ã§ã€åœ¨åº«10å€‹ä»¥ä¸‹ã®å•†å“ã®å¹³å‡ä¾¡æ ¼
        const electronicAvg =
          products
            .filter((p) => p.category === 'é›»å­æ©Ÿå™¨' && p.stock <= 10)
            .reduce((sum, p) => sum + p.price, 0) /
          products.filter((p) => p.category === 'é›»å­æ©Ÿå™¨' && p.stock <= 10)
            .length;

        console.log('é›»å­æ©Ÿå™¨ï¼ˆåœ¨åº«10å€‹ä»¥ä¸‹ï¼‰ã®å¹³å‡ä¾¡æ ¼:', electronicAvg);

        // 10%å‰²å¼•ã‚’é©ç”¨ã—ã¦ã€10000å††ä»¥ä¸Šã®å•†å“
        const discountedExpensive = products
          .map((p) => ({ ...p, price: Math.floor(p.price * 0.9) })) // 10%å‰²å¼•
          .filter((p) => p.price >= 10000); // 10000å††ä»¥ä¸Š

        console.log('10%å‰²å¼•å¾Œã€10000å††ä»¥ä¸Š:', discountedExpensive);

        const code = `// 1. åœ¨åº«ãŒã‚ã‚‹å•†å“ã§ã€ä¾¡æ ¼ãŒå®‰ã„é †ã«ã‚½ãƒ¼ãƒˆã—ã¦ã€ä¸Šä½3ã¤
const top3 = products
  .filter(p => p.stock > 0)        // åœ¨åº«ãŒã‚ã‚‹
  .sort((a, b) => a.price - b.price)  // å®‰ã„é †
  .slice(0, 3)                     // ä¸Šä½3ã¤
  .map(p => ({ name: p.name, price: p.price })); // åå‰ã¨ä¾¡æ ¼

// 2. é›»å­æ©Ÿå™¨ã§åœ¨åº«10å€‹ä»¥ä¸‹ã®å•†å“ã®å¹³å‡ä¾¡æ ¼
const electronicAvg = products
  .filter(p => p.category === 'é›»å­æ©Ÿå™¨' && p.stock <= 10)
  .reduce((sum, p) => sum + p.price, 0) /
  products.filter(...).length;

// 3. 10%å‰²å¼•ã‚’é©ç”¨ã—ã¦ã€10000å††ä»¥ä¸Šã®å•†å“
const discountedExpensive = products
  .map(p => ({ ...p, price: Math.floor(p.price * 0.9) }))
  .filter(p => p.price >= 10000);`;

        const resultHtml = `
          <div class="code-display">${code}</div>
          <h3>â›“ï¸ ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³: è¤‡æ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹</h3>
          <p><strong>ãƒã‚¤ãƒ³ãƒˆ:</strong> å„ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ–°ã—ã„é…åˆ—ã‚’è¿”ã™ã®ã§ã€ç¶šã‘ã¦æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¹ã‚‹</p>

          <h4>ğŸ† åœ¨åº«ã‚ã‚Šãƒ»ä½ä¾¡æ ¼TOP3</h4>
          ${top3
            .map(
              (p, i) => `
            <div class="product-card">
              <span><strong>${i + 1}ä½: ${p.name}</strong></span>
              <span class="price">${p.price.toLocaleString()}å††</span>
            </div>
          `
            )
            .join('')}

          <h4>ğŸ“Š é›»å­æ©Ÿå™¨ï¼ˆåœ¨åº«10å€‹ä»¥ä¸‹ï¼‰ã®å¹³å‡ä¾¡æ ¼</h4>
          <div class="stat-box" style="max-width: 300px; margin: 10px 0;">
            <div class="stat-value">${Math.floor(electronicAvg).toLocaleString()}å††</div>
          </div>

          <h4>ğŸ’° 10%å‰²å¼•å¾Œã€10000å††ä»¥ä¸Šã®å•†å“</h4>
          ${discountedExpensive
            .map(
              (p) => `
            <div class="product-card">
              <span><strong>${p.name}</strong></span>
              <div>
                <span class="discount-badge">10% OFF</span>
                <span class="price">${p.price.toLocaleString()}å††</span>
              </div>
            </div>
          `
            )
            .join('')}

          <div style="margin-top: 20px; padding: 15px; background: #fff7e6; border-left: 4px solid #fa709a; border-radius: 5px;">
            <strong>ğŸ’¡ ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã®ã‚³ãƒ„</strong>
            <ul style="margin-top: 10px; padding-left: 20px;">
              <li>å‡¦ç†ã®é †ç•ªãŒé‡è¦ï¼ˆfilterã—ã¦ã‹ã‚‰sortã™ã‚‹ï¼‰</li>
              <li>1è¡Œã«1ãƒ¡ã‚½ãƒƒãƒ‰ãšã¤æ›¸ãã¨èª­ã¿ã‚„ã™ã„</li>
              <li>å„ãƒ¡ã‚½ãƒƒãƒ‰ã¯å…ƒã®é…åˆ—ã‚’å¤‰æ›´ã—ãªã„</li>
            </ul>
          </div>
        `;

        document.getElementById('result').innerHTML = resultHtml;
        displayProducts(top3, 'åœ¨åº«ã‚ã‚Šãƒ»ä½ä¾¡æ ¼TOP3');
      }

      // ã™ã¹ã¦å®Ÿè¡Œ
      function runAll() {
        showMapExamples();
        setTimeout(() => {
          alert('map ã®ä¾‹ã‚’è¡¨ç¤ºã—ã¾ã—ãŸï¼æ¬¡ã¯ filter ã®ä¾‹ã‚’è¦‹ã¦ã¿ã‚ˆã†');
        }, 100);
      }

      console.log('ğŸ”„ é…åˆ—ãƒ¡ã‚½ãƒƒãƒ‰ã®ç·´ç¿’ã¸ã‚ˆã†ã“ãï¼');
      console.log('ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€å„ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ï¼');
    </script>
  </body>
</html>
