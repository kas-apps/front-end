<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å•é¡Œ 4-2: æŠ•ç¨¿ä¸€è¦§ã‚’è¡¨ç¤º</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        min-height: 100vh;
        padding: 40px 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      header {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        text-align: center;
        margin-bottom: 30px;
      }

      h1 {
        color: #f5576c;
        margin-bottom: 10px;
        font-size: 32px;
      }

      .subtitle {
        color: #666;
        font-size: 16px;
      }

      .loading {
        background: white;
        border-radius: 15px;
        padding: 60px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #f5576c;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading p {
        color: #f5576c;
        font-size: 18px;
        font-weight: bold;
      }

      #posts {
        display: grid;
        gap: 20px;
      }

      .post-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border-left: 5px solid #f5576c;
        transition: transform 0.3s, box-shadow 0.3s;
        animation: fadeIn 0.5s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .post-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(245, 87, 108, 0.3);
      }

      .post-card h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 20px;
        line-height: 1.4;
        text-transform: capitalize;
      }

      .post-card p {
        color: #666;
        line-height: 1.6;
        margin-bottom: 15px;
      }

      .post-card small {
        color: #999;
        font-size: 13px;
        background: #f5f5f5;
        padding: 5px 10px;
        border-radius: 5px;
        display: inline-block;
      }

      .error {
        background: #ff5252;
        color: white;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .error h3 {
        margin-bottom: 10px;
        font-size: 24px;
      }

      .stats {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        text-align: center;
        margin-bottom: 20px;
        color: #f5576c;
        font-size: 18px;
        font-weight: bold;
      }

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
      @media (max-width: 768px) {
        h1 {
          font-size: 26px;
        }

        header {
          padding: 20px;
        }

        .post-card {
          padding: 20px;
        }

        .post-card h3 {
          font-size: 18px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸ“ æŠ•ç¨¿ä¸€è¦§</h1>
        <p class="subtitle">JSONPlaceholder API ã‹ã‚‰æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</p>
      </header>

      <div id="stats"></div>
      <div id="posts"></div>
    </div>

    <script>
      // HTMLè¦ç´ ã‚’å–å¾—
      const postsDiv = document.getElementById("posts");
      const statsDiv = document.getElementById("stats");

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•çš„ã«æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—
      document.addEventListener("DOMContentLoaded", async () => {
        console.log("ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸï¼");
        console.log("æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™...");

        try {
          // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
          postsDiv.innerHTML = `
            <div class="loading">
              <div class="spinner"></div>
              <p>æŠ•ç¨¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            </div>
          `;

          // JSONPlaceholder API ã‹ã‚‰æŠ•ç¨¿ä¸€è¦§ã‚’å–å¾—
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts"
          );

          console.log("ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:", response.status);

          // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒæˆåŠŸã—ãŸã‹ãƒã‚§ãƒƒã‚¯
          if (!response.ok) {
            throw new Error(`HTTPã‚¨ãƒ©ãƒ¼: ${response.status}`);
          }

          // JSONãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›
          const posts = await response.json();

          console.log("å–å¾—ã—ãŸæŠ•ç¨¿æ•°:", posts.length);
          console.log("æœ€åˆã®æŠ•ç¨¿:", posts[0]);

          // æœ€åˆã®10ä»¶ã ã‘è¡¨ç¤º
          const displayPosts = posts.slice(0, 10);
          console.log("è¡¨ç¤ºã™ã‚‹æŠ•ç¨¿æ•°:", displayPosts.length);

          // çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º
          statsDiv.innerHTML = `
            <div class="stats">
              ğŸ“Š å…¨${posts.length}ä»¶ä¸­ã€æœ€åˆã®${displayPosts.length}ä»¶ã‚’è¡¨ç¤ºä¸­
            </div>
          `;

          // æŠ•ç¨¿ã‚’ä¸€ã¤ãšã¤ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ï¼ˆå­¦ç¿’ã®ãŸã‚ï¼‰
          displayPosts.forEach((post, index) => {
            console.log(`æŠ•ç¨¿ ${index + 1}:`, {
              id: post.id,
              title: post.title,
              body: post.body,
            });
          });

          // æ–¹æ³•1: forEach ã‚’ä½¿ã£ãŸæ›¸ãæ–¹
          // let html = "";
          // displayPosts.forEach((post) => {
          //   html += `
          //     <div class="post-card">
          //       <h3>${post.title}</h3>
          //       <p>${post.body}</p>
          //       <small>ğŸ“Œ æŠ•ç¨¿ID: ${post.id}</small>
          //     </div>
          //   `;
          // });

          // æ–¹æ³•2: map ã‚’ä½¿ã£ãŸæ›¸ãæ–¹ï¼ˆã“ã£ã¡ã®æ–¹ãŒãƒ¢ãƒ€ãƒ³ï¼ï¼‰
          const html = displayPosts
            .map(
              (post) => `
                <div class="post-card">
                  <h3>${post.title}</h3>
                  <p>${post.body}</p>
                  <small>ğŸ“Œ æŠ•ç¨¿ID: ${post.id} | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${post.userId}</small>
                </div>
              `
            )
            .join(""); // é…åˆ—ã‚’æ–‡å­—åˆ—ã«çµåˆ

          // HTMLã«æŒ¿å…¥
          postsDiv.innerHTML = html;

          console.log("æŠ•ç¨¿ã®è¡¨ç¤ºãŒå®Œäº†ã—ã¾ã—ãŸï¼âœ…");
        } catch (error) {
          // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®å‡¦ç†
          console.error("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
          console.error("ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡:", error.name);
          console.error("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:", error.message);

          // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”»é¢ã«è¡¨ç¤º
          postsDiv.innerHTML = `
            <div class="error">
              <h3>âŒ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</h3>
              <p>${error.message}</p>
              <p style="font-size: 14px; margin-top: 10px;">
                ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„
              </p>
            </div>
          `;

          // çµ±è¨ˆæƒ…å ±ã‚’ã‚¯ãƒªã‚¢
          statsDiv.innerHTML = "";
        }
      });

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      console.log("å•é¡Œ 4-2: æŠ•ç¨¿ä¸€è¦§ã‚’è¡¨ç¤º");
      console.log(
        "ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã¨ã€è‡ªå‹•çš„ã«æŠ•ç¨¿ä¸€è¦§ãŒå–å¾—ã•ã‚Œã‚‹ã‚ˆï¼"
      );
      console.log(
        "F12ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ãã¨ã€è©³ç´°ãªæƒ…å ±ãŒè¦‹ã‚‰ã‚Œã‚‹ã‚ˆï¼"
      );
    </script>
  </body>
</html>
