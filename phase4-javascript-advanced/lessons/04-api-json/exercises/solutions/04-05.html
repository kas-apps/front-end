<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å•é¡Œ 4-5: HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ†å²</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        min-height: 100vh;
        padding: 40px 20px;
      }

      .container {
        max-width: 700px;
        margin: 0 auto;
      }

      header {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        text-align: center;
        margin-bottom: 30px;
      }

      h1 {
        color: #ff6b6b;
        margin-bottom: 10px;
        font-size: 32px;
      }

      .subtitle {
        color: #666;
        font-size: 16px;
      }

      .search-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .search-section h2 {
        color: #ff6b6b;
        margin-bottom: 20px;
        font-size: 24px;
      }

      .search-form {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      input {
        flex: 1;
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      input:focus {
        outline: none;
        border-color: #ff6b6b;
      }

      button {
        background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
      }

      button:active:not(:disabled) {
        transform: translateY(0);
      }

      button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .info-box {
        background: #e3f2fd;
        border-left: 5px solid #2196f3;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        color: #0d47a1;
        font-size: 14px;
      }

      .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
      }

      .quick-btn {
        background: #f5f5f5;
        border: 2px solid #ddd;
        padding: 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
      }

      .quick-btn:hover {
        background: #ff6b6b;
        color: white;
        border-color: #ff6b6b;
      }

      #result {
        margin-top: 20px;
      }

      .loading {
        background: #fff9e6;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #feca57;
      }

      .loading p {
        color: #ff6b6b;
        font-size: 16px;
      }

      .success {
        background: #d4edda;
        border: 2px solid #c3e6cb;
        color: #155724;
        padding: 25px;
        border-radius: 15px;
        animation: slideIn 0.5s ease-out;
      }

      .success h3 {
        margin-bottom: 20px;
        font-size: 24px;
        border-bottom: 2px solid #c3e6cb;
        padding-bottom: 10px;
      }

      .success p {
        margin: 10px 0;
        font-size: 16px;
      }

      .success strong {
        color: #0c3d1a;
      }

      .error {
        background: #f8d7da;
        border: 2px solid #f5c6cb;
        color: #721c24;
        padding: 25px;
        border-radius: 15px;
        animation: shake 0.5s;
      }

      .error h3 {
        margin-bottom: 15px;
        font-size: 24px;
      }

      .error p {
        margin: 10px 0;
        font-size: 16px;
      }

      .status-code {
        display: inline-block;
        background: rgba(0, 0, 0, 0.1);
        padding: 5px 10px;
        border-radius: 5px;
        font-family: monospace;
        font-weight: bold;
        margin: 10px 0;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
      @media (max-width: 768px) {
        .search-form {
          flex-direction: column;
        }

        h1 {
          font-size: 26px;
        }

        .quick-actions {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸ“Š ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢</h1>
        <p class="subtitle">HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã§é©åˆ‡ã«åˆ†å²ã—ã‚ˆã†</p>
      </header>

      <div class="search-section">
        <h2>ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§æ¤œç´¢</h2>

        <div class="info-box">
          <strong>ğŸ’¡ è©¦ã—ã¦ã¿ã‚ˆã†:</strong><br />
          ãƒ» ID 1-10: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ï¼ˆ200 OKï¼‰<br />
          ãƒ» ID 999: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆ404 Not Foundï¼‰<br />
          ãƒ» ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ç•°ãªã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆï¼
        </div>

        <div class="search-form">
          <input
            type="number"
            id="userId"
            placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥åŠ›ï¼ˆä¾‹: 1ï¼‰"
            min="1"
            value=""
          />
          <button id="searchBtn">æ¤œç´¢ ğŸ”</button>
        </div>

        <div class="quick-actions">
          <button class="quick-btn" onclick="searchUser(1)">
            âœ… ID 1 (æˆåŠŸ)
          </button>
          <button class="quick-btn" onclick="searchUser(5)">
            âœ… ID 5 (æˆåŠŸ)
          </button>
          <button class="quick-btn" onclick="searchUser(999)">
            âŒ ID 999 (404)
          </button>
        </div>

        <div id="result"></div>
      </div>
    </div>

    <script>
      // HTMLè¦ç´ ã‚’å–å¾—
      const userIdInput = document.getElementById("userId");
      const searchBtn = document.getElementById("searchBtn");
      const result = document.getElementById("result");

      // æ¤œç´¢ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®å‡¦ç†
      searchBtn.addEventListener("click", () => {
        const userId = userIdInput.value;
        searchUser(userId);
      });

      // Enterã‚­ãƒ¼ã§ã‚‚æ¤œç´¢ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
      userIdInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          const userId = userIdInput.value;
          searchUser(userId);
        }
      });

      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ã™ã‚‹é–¢æ•°
      async function searchUser(userId) {
        // å…¥åŠ›ãƒã‚§ãƒƒã‚¯
        if (!userId) {
          result.innerHTML = `
            <div class="error">
              <h3>âŒ å…¥åŠ›ã‚¨ãƒ©ãƒ¼</h3>
              <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
            </div>
          `;
          return;
        }

        // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’æ›´æ–°
        userIdInput.value = userId;

        try {
          // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
          searchBtn.disabled = true;
          searchBtn.textContent = "æ¤œç´¢ä¸­...";

          // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
          result.innerHTML = `
            <div class="loading">
              <p>ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼ID ${userId} ã‚’æ¤œç´¢ä¸­...</p>
            </div>
          `;

          console.log(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ID ${userId} ã‚’æ¤œç´¢ã—ã¾ã™...`);

          // APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
          const response = await fetch(
            `https://jsonplaceholder.typicode.com/users/${userId}`
          );

          console.log("ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:", response.status);
          console.log("response.ok:", response.ok);

          // HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ†å²
          if (!response.ok) {
            let errorMessage = "";
            let errorDescription = "";

            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã”ã¨ã«è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®š
            switch (response.status) {
              case 404:
                errorMessage = "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“";
                errorDescription = `ID ${userId} ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚åˆ¥ã®IDã‚’è©¦ã—ã¦ãã ã•ã„ã€‚`;
                console.log("404ã‚¨ãƒ©ãƒ¼: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
                break;

              case 500:
                errorMessage = "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";
                errorDescription =
                  "ã‚µãƒ¼ãƒãƒ¼å´ã§å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
                console.log("500ã‚¨ãƒ©ãƒ¼: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼");
                break;

              case 401:
                errorMessage = "èªè¨¼ãŒå¿…è¦ã§ã™";
                errorDescription =
                  "ã“ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚";
                console.log("401ã‚¨ãƒ©ãƒ¼: èªè¨¼ã‚¨ãƒ©ãƒ¼");
                break;

              case 403:
                errorMessage = "ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“";
                errorDescription =
                  "ã“ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚";
                console.log("403ã‚¨ãƒ©ãƒ¼: ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦");
                break;

              default:
                errorMessage = `ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ`;
                errorDescription = `äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚`;
                console.log(`${response.status}ã‚¨ãƒ©ãƒ¼`);
            }

            // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            result.innerHTML = `
              <div class="error">
                <h3>âŒ ${errorMessage}</h3>
                <div class="status-code">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰: ${response.status}</div>
                <p>${errorDescription}</p>
                <p style="font-size: 14px; margin-top: 15px;">
                  ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ID 1-10 ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å­˜åœ¨ã—ã¾ã™
                </p>
              </div>
            `;

            return; // å‡¦ç†ã‚’çµ‚äº†
          }

          // æˆåŠŸæ™‚ï¼ˆ200 OKï¼‰
          console.log("200 OK: ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«æˆåŠŸ");

          // JSONãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›
          const user = await response.json();

          console.log("å–å¾—ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±:", user);

          // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
          result.innerHTML = `
            <div class="success">
              <h3>âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</h3>
              <div class="status-code">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰: 200 OK</div>
              <p><strong>ID:</strong> ${user.id}</p>
              <p><strong>åå‰:</strong> ${user.name}</p>
              <p><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</strong> ${user.username}</p>
              <p><strong>ãƒ¡ãƒ¼ãƒ«:</strong> ${user.email}</p>
              <p><strong>é›»è©±:</strong> ${user.phone}</p>
              <p><strong>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ:</strong> ${user.website}</p>
              <p><strong>ä¼šç¤¾:</strong> ${user.company.name}</p>
              <p><strong>ä½æ‰€:</strong> ${user.address.city}, ${user.address.street}</p>
            </div>
          `;
        } catch (error) {
          // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãªã©ã‚’ã‚­ãƒ£ãƒƒãƒ
          console.error("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
          console.error("ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡:", error.name);
          console.error("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:", error.message);

          // ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡ã‚’åˆ¤å®š
          let errorType = "";
          let errorDescription = "";

          if (
            error.name === "TypeError" &&
            error.message.includes("Failed to fetch")
          ) {
            // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
            errorType = "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼";
            errorDescription =
              "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚";
            console.log("ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãªã—");
          } else if (error.name === "SyntaxError") {
            // JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼
            errorType = "ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚¨ãƒ©ãƒ¼";
            errorDescription =
              "ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚";
            console.log("JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼");
          } else {
            // ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼
            errorType = "äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼";
            errorDescription = error.message;
          }

          // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
          result.innerHTML = `
            <div class="error">
              <h3>âŒ ${errorType}</h3>
              <p>${errorDescription}</p>
              <p style="font-size: 14px; margin-top: 15px;">
                è©³ç´°: ${error.message}
              </p>
            </div>
          `;
        } finally {
          // æˆåŠŸã—ã¦ã‚‚å¤±æ•—ã—ã¦ã‚‚å¿…ãšå®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†
          // ãƒœã‚¿ãƒ³ã‚’å…ƒã«æˆ»ã™
          searchBtn.disabled = false;
          searchBtn.textContent = "æ¤œç´¢ ğŸ”";
        }
      }

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      console.log("å•é¡Œ 4-5: HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ†å²");
      console.log("è‰²ã€…ãªãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’æ¤œç´¢ã—ã¦ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ï¼");
      console.log("ID 1-10: æˆåŠŸï¼ˆ200ï¼‰");
      console.log("ID 999: å¤±æ•—ï¼ˆ404ï¼‰");
      console.log(
        "F12ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ãã¨ã€è©³ç´°ãªæƒ…å ±ãŒè¦‹ã‚‰ã‚Œã‚‹ã‚ˆï¼"
      );
    </script>
  </body>
</html>
