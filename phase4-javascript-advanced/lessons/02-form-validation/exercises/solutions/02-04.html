<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å•é¡Œ4: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        padding: 40px;
        max-width: 550px;
        width: 100%;
      }

      h1 {
        color: #333;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .description {
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
        line-height: 1.6;
      }

      .info-box {
        background: #e7f5ff;
        border-left: 4px solid #4facfe;
        padding: 12px;
        margin-bottom: 24px;
        border-radius: 4px;
        font-size: 13px;
        color: #1971c2;
      }

      .form-group {
        margin-bottom: 24px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 600;
        font-size: 14px;
      }

      input {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s;
      }

      input:focus {
        outline: none;
        border-color: #4facfe;
      }

      /* ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ */
      input.valid {
        border-color: #51cf66;
        background-color: #f0fdf4;
      }

      input.invalid {
        border-color: #ff6b6b;
        background-color: #fff5f5;
      }

      /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
      .error-message {
        display: none;
        margin-top: 8px;
        padding: 10px;
        background-color: #ffe0e0;
        border-left: 4px solid #ff6b6b;
        border-radius: 4px;
        color: #c92a2a;
        font-size: 13px;
        animation: slideIn 0.3s ease-out;
      }

      .error-message.show {
        display: block;
      }

      /* æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
      .success-message {
        display: none;
        margin-top: 8px;
        padding: 10px;
        background-color: #d4edda;
        border-left: 4px solid #51cf66;
        border-radius: 4px;
        color: #155724;
        font-size: 13px;
        font-weight: 600;
        animation: slideIn 0.3s ease-out;
      }

      .success-message.show {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      button {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        margin-top: 10px;
      }

      button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(79, 172, 254, 0.4);
      }

      button:active:not(:disabled) {
        transform: translateY(0);
      }

      button:disabled {
        background: #adb5bd;
        cursor: not-allowed;
      }

      /* æœ€çµ‚çµæœ */
      .result {
        display: none;
        margin-top: 24px;
        padding: 20px;
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        border: 2px solid #28a745;
        border-radius: 8px;
        animation: slideIn 0.3s ease-out;
      }

      .result.show {
        display: block;
      }

      .result h3 {
        color: #155724;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
      @media (max-width: 600px) {
        .container {
          padding: 24px;
        }

        h1 {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</h1>
      <p class="description">
        å•é¡Œ4ã®è§£ç­”ä¾‹ï¼šå…¥åŠ›ä¸­ã¾ãŸã¯å…¥åŠ›å®Œäº†å¾Œã«å³åº§ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¾ã™ã€‚
      </p>

      <div class="info-box">
        ğŸ’¡ <strong>ãƒã‚¤ãƒ³ãƒˆ</strong>: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚ŒãŸæ™‚ï¼ˆblurï¼‰ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã€
        å…¥åŠ›ä¸­ï¼ˆinputï¼‰ã‚‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
      </div>

      <form id="registrationForm">
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼å -->
        <div class="form-group">
          <label for="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆ3æ–‡å­—ä»¥ä¸Šï¼‰</label>
          <input
            type="text"
            id="username"
            name="username"
            placeholder="ä¾‹: yamada_taro"
          />
          <div class="error-message" id="usernameError"></div>
          <div class="success-message" id="usernameSuccess">
            <span>âœ“</span>
            <span>OK!</span>
          </div>
        </div>

        <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ -->
        <div class="form-group">
          <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="ä¾‹: taro@example.com"
          />
          <div class="error-message" id="emailError"></div>
          <div class="success-message" id="emailSuccess">
            <span>âœ“</span>
            <span>OK!</span>
          </div>
        </div>

        <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -->
        <div class="form-group">
          <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šï¼‰</label>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="8æ–‡å­—ä»¥ä¸Šã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
          />
          <div class="error-message" id="passwordError"></div>
          <div class="success-message" id="passwordSuccess">
            <span>âœ“</span>
            <span>OK!</span>
          </div>
        </div>

        <button type="submit" id="submitBtn">ç™»éŒ²ã™ã‚‹</button>
      </form>

      <!-- ç™»éŒ²æˆåŠŸã®çµæœ -->
      <div class="result" id="result">
        <h3>
          <span>ğŸ‰</span>
          <span>ç™»éŒ²æˆåŠŸï¼</span>
        </h3>
        <p>å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ­£ã—ãæ¤œè¨¼ã•ã‚Œã¾ã—ãŸã€‚</p>
      </div>
    </div>

    <script>
      // ===== è¦ç´ ã‚’å–å¾— =====
      const form = document.getElementById("registrationForm");
      const usernameInput = document.getElementById("username");
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const submitBtn = document.getElementById("submitBtn");
      const result = document.getElementById("result");

      // ===== ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•° =====
      function showError(inputId, errorId, message) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(errorId);
        const successDiv = document.getElementById(inputId + "Success");

        input.classList.add("invalid");
        input.classList.remove("valid");
        errorDiv.textContent = message;
        errorDiv.classList.add("show");
        successDiv.classList.remove("show");
      }

      // ===== æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•° =====
      function showSuccess(inputId, successId) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(inputId + "Error");
        const successDiv = document.getElementById(successId);

        input.classList.add("valid");
        input.classList.remove("invalid");
        errorDiv.classList.remove("show");
        successDiv.classList.add("show");
      }

      // ===== ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹é–¢æ•° =====
      function clearValidation(inputId) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(inputId + "Error");
        const successDiv = document.getElementById(inputId + "Success");

        input.classList.remove("valid", "invalid");
        errorDiv.classList.remove("show");
        successDiv.classList.remove("show");
      }

      // ===== ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validateUsername() {
        const value = usernameInput.value.trim();

        if (value.length === 0) {
          clearValidation("username");
          return false;
        }

        if (value.length < 3) {
          showError(
            "username",
            "usernameError",
            `3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç¾åœ¨: ${value.length}æ–‡å­—ï¼‰`
          );
          return false;
        }

        showSuccess("username", "usernameSuccess");
        console.log("âœ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼å: OK");
        return true;
      }

      // ===== ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validateEmail() {
        const value = emailInput.value.trim();
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (value.length === 0) {
          clearValidation("email");
          return false;
        }

        if (!emailPattern.test(value)) {
          showError(
            "email",
            "emailError",
            "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: user@example.comï¼‰"
          );
          return false;
        }

        showSuccess("email", "emailSuccess");
        console.log("âœ“ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: OK");
        return true;
      }

      // ===== ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validatePassword() {
        const value = passwordInput.value;

        if (value.length === 0) {
          clearValidation("password");
          return false;
        }

        if (value.length < 8) {
          showError(
            "password",
            "passwordError",
            `8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç¾åœ¨: ${value.length}æ–‡å­—ï¼‰`
          );
          return false;
        }

        showSuccess("password", "passwordSuccess");
        console.log("âœ“ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: OK");
        return true;
      }

      // ===== é€ä¿¡ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ¶å¾¡ =====
      function updateSubmitButton() {
        const allValid =
          usernameInput.classList.contains("valid") &&
          emailInput.classList.contains("valid") &&
          passwordInput.classList.contains("valid");

        submitBtn.disabled = !allValid;
      }

      // ===== ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ =====
      // blur: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚ŒãŸæ™‚ã«ãƒã‚§ãƒƒã‚¯
      usernameInput.addEventListener("blur", function () {
        validateUsername();
        updateSubmitButton();
      });

      // input: å…¥åŠ›ä¸­ã«ã‚‚ãƒã‚§ãƒƒã‚¯ï¼ˆãŸã ã—ã€ä½•ã‹å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ï¼‰
      usernameInput.addEventListener("input", function () {
        if (usernameInput.value.length > 0) {
          validateUsername();
          updateSubmitButton();
        }
      });

      // ===== ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ =====
      emailInput.addEventListener("blur", function () {
        validateEmail();
        updateSubmitButton();
      });

      emailInput.addEventListener("input", function () {
        if (emailInput.value.length > 0) {
          validateEmail();
          updateSubmitButton();
        }
      });

      // ===== ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ =====
      passwordInput.addEventListener("blur", function () {
        validatePassword();
        updateSubmitButton();
      });

      passwordInput.addEventListener("input", function () {
        if (passwordInput.value.length > 0) {
          validatePassword();
          updateSubmitButton();
        }
      });

      // ===== ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ =====
      form.addEventListener("submit", function (event) {
        event.preventDefault();

        console.log("=== ãƒ•ã‚©ãƒ¼ãƒ ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ ===");

        // æœ€çµ‚ãƒã‚§ãƒƒã‚¯
        const usernameValid = validateUsername();
        const emailValid = validateEmail();
        const passwordValid = validatePassword();

        if (usernameValid && emailValid && passwordValid) {
          console.log("\nğŸ‰ å…¨ã¦ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«æˆåŠŸï¼");

          // FormDataã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
          const formData = new FormData(form);
          const data = Object.fromEntries(formData);

          console.log("ç™»éŒ²ãƒ‡ãƒ¼ã‚¿:", data);

          // çµæœã‚’è¡¨ç¤º
          result.classList.add("show");
          result.scrollIntoView({ behavior: "smooth", block: "nearest" });
        } else {
          console.log("\nâŒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™");
        }
      });

      // ===== ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ =====
      console.log("âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ");
      console.log("\nã€å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆã€‘");
      console.log("1. blur ã‚¤ãƒ™ãƒ³ãƒˆ: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚ŒãŸæ™‚ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³");
      console.log("2. input ã‚¤ãƒ™ãƒ³ãƒˆ: å…¥åŠ›ä¸­ã‚‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒã‚§ãƒƒã‚¯");
      console.log("3. è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯: ç·‘ï¼ˆæˆåŠŸï¼‰/ èµ¤ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰");
      console.log("4. é€ä¿¡ãƒœã‚¿ãƒ³ã®åˆ¶å¾¡: å…¨ã¦ valid ã§ãªã‘ã‚Œã°ç„¡åŠ¹åŒ–");
      console.log("\nã€ã‚¤ãƒ™ãƒ³ãƒˆã®ä½¿ã„åˆ†ã‘ã€‘");
      console.log("ãƒ»blur: æœ€åˆã®ãƒã‚§ãƒƒã‚¯ã«ä½¿ç”¨ï¼ˆå…¥åŠ›å®Œäº†å¾Œï¼‰");
      console.log("ãƒ»input: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒã‚§ãƒƒã‚¯ã«ä½¿ç”¨ï¼ˆä¿®æ­£ä¸­ã®çŠ¶æ…‹ç¢ºèªï¼‰");
      console.log("\nå®Ÿéš›ã«å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„:");
      console.log("- å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã—ã¦ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å¤–ã™ã¨ã€å³åº§ã«ãƒã‚§ãƒƒã‚¯");
      console.log("- ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹çŠ¶æ…‹ã§å…¥åŠ›ã‚’ç¶šã‘ã‚‹ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚Œã‚‹");
      console.log("- å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ valid ã«ãªã‚‹ã¨ã€é€ä¿¡ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹");
    </script>
  </body>
</html>
