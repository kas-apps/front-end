<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å•é¡Œ5: æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ãŸã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        padding: 40px;
        max-width: 650px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
      }

      h1 {
        color: #333;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .description {
        color: #666;
        margin-bottom: 24px;
        font-size: 14px;
        line-height: 1.6;
      }

      .form-group {
        margin-bottom: 24px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 600;
        font-size: 14px;
      }

      input {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s;
      }

      input:focus {
        outline: none;
        border-color: #fa709a;
      }

      input.valid {
        border-color: #51cf66;
        background-color: #f0fdf4;
      }

      input.invalid {
        border-color: #ff6b6b;
        background-color: #fff5f5;
      }

      .hint {
        font-size: 13px;
        color: #868e96;
        margin-top: 4px;
      }

      .error-message {
        display: none;
        margin-top: 8px;
        padding: 10px;
        background-color: #ffe0e0;
        border-left: 4px solid #ff6b6b;
        border-radius: 4px;
        color: #c92a2a;
        font-size: 13px;
      }

      .error-message.show {
        display: block;
      }

      .success-message {
        display: none;
        margin-top: 8px;
        padding: 10px;
        background-color: #d4edda;
        border-left: 4px solid #51cf66;
        border-radius: 4px;
        color: #155724;
        font-size: 13px;
        font-weight: 600;
      }

      .success-message.show {
        display: block;
      }

      /* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¦ä»¶ãƒªã‚¹ãƒˆ */
      .requirements {
        margin-top: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 6px;
      }

      .requirements-title {
        font-size: 13px;
        font-weight: 600;
        color: #495057;
        margin-bottom: 8px;
      }

      .requirement {
        font-size: 13px;
        margin: 4px 0;
        padding: 4px 0;
        transition: color 0.3s;
      }

      .requirement.unmet {
        color: #868e96;
      }

      .requirement.met {
        color: #51cf66;
        font-weight: 600;
      }

      button {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        margin-top: 10px;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(250, 112, 154, 0.4);
      }

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
      @media (max-width: 600px) {
        .container {
          padding: 24px;
        }

        h1 {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¯ æ­£è¦è¡¨ç¾ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</h1>
      <p class="description">
        å•é¡Œ5ã®è§£ç­”ä¾‹ï¼šæ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦è¤‡é›‘ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
      </p>

      <form id="customForm">
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼å -->
        <div class="form-group">
          <label for="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>
          <input
            type="text"
            id="username"
            name="username"
            placeholder="ä¾‹: yamada_taro123"
          />
          <div class="hint">è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿ä½¿ç”¨å¯èƒ½</div>
          <div class="error-message" id="usernameError"></div>
          <div class="success-message" id="usernameSuccess">âœ“ OK!</div>
        </div>

        <!-- é›»è©±ç•ªå· -->
        <div class="form-group">
          <label for="phone">é›»è©±ç•ªå·</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            placeholder="090-1234-5678"
          />
          <div class="hint">å½¢å¼: 090-1234-5678</div>
          <div class="error-message" id="phoneError"></div>
          <div class="success-message" id="phoneSuccess">âœ“ OK!</div>
        </div>

        <!-- éƒµä¾¿ç•ªå· -->
        <div class="form-group">
          <label for="zip">éƒµä¾¿ç•ªå·</label>
          <input type="text" id="zip" name="zip" placeholder="123-4567" />
          <div class="hint">å½¢å¼: 123-4567</div>
          <div class="error-message" id="zipError"></div>
          <div class="success-message" id="zipSuccess">âœ“ OK!</div>
        </div>

        <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -->
        <div class="form-group">
          <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›"
          />
          <div class="requirements">
            <div class="requirements-title">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®è¦ä»¶:</div>
            <div class="requirement unmet" id="req-length">âœ— 8æ–‡å­—ä»¥ä¸Š</div>
            <div class="requirement unmet" id="req-uppercase">âœ— å¤§æ–‡å­—ã‚’å«ã‚€</div>
            <div class="requirement unmet" id="req-lowercase">âœ— å°æ–‡å­—ã‚’å«ã‚€</div>
            <div class="requirement unmet" id="req-number">âœ— æ•°å­—ã‚’å«ã‚€</div>
          </div>
          <div class="error-message" id="passwordError"></div>
          <div class="success-message" id="passwordSuccess">
            âœ“ å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã™ï¼
          </div>
        </div>

        <button type="submit">ç™»éŒ²ã™ã‚‹</button>
      </form>
    </div>

    <script>
      // ===== è¦ç´ ã‚’å–å¾— =====
      const form = document.getElementById("customForm");
      const usernameInput = document.getElementById("username");
      const phoneInput = document.getElementById("phone");
      const zipInput = document.getElementById("zip");
      const passwordInput = document.getElementById("password");

      // ===== æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ =====
      const patterns = {
        // è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿
        username: /^[a-zA-Z0-9_]+$/,
        // é›»è©±ç•ªå·: 090-1234-5678
        phone: /^[0-9]{3}-[0-9]{4}-[0-9]{4}$/,
        // éƒµä¾¿ç•ªå·: 123-4567
        zip: /^[0-9]{3}-[0-9]{4}$/,
        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å„æ¡ä»¶
        hasUppercase: /[A-Z]/,
        hasLowercase: /[a-z]/,
        hasNumber: /[0-9]/,
      };

      // ===== æ±ç”¨ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºé–¢æ•° =====
      function showError(inputId, message) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(inputId + "Error");
        const successDiv = document.getElementById(inputId + "Success");

        input.classList.add("invalid");
        input.classList.remove("valid");
        errorDiv.textContent = message;
        errorDiv.classList.add("show");
        successDiv.classList.remove("show");
      }

      // ===== æ±ç”¨æˆåŠŸè¡¨ç¤ºé–¢æ•° =====
      function showSuccess(inputId) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(inputId + "Error");
        const successDiv = document.getElementById(inputId + "Success");

        input.classList.add("valid");
        input.classList.remove("invalid");
        errorDiv.classList.remove("show");
        successDiv.classList.add("show");
      }

      // ===== ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒªã‚¢é–¢æ•° =====
      function clearValidation(inputId) {
        const input = document.getElementById(inputId);
        const errorDiv = document.getElementById(inputId + "Error");
        const successDiv = document.getElementById(inputId + "Success");

        input.classList.remove("valid", "invalid");
        errorDiv.classList.remove("show");
        successDiv.classList.remove("show");
      }

      // ===== ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validateUsername() {
        const value = usernameInput.value.trim();

        if (value.length === 0) {
          clearValidation("username");
          return false;
        }

        if (!patterns.username.test(value)) {
          showError("username", "è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿ä½¿ç”¨ã§ãã¾ã™");
          return false;
        }

        showSuccess("username");
        console.log("âœ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼å: OK");
        return true;
      }

      // ===== é›»è©±ç•ªå·ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validatePhone() {
        const value = phoneInput.value.trim();

        if (value.length === 0) {
          clearValidation("phone");
          return false;
        }

        if (!patterns.phone.test(value)) {
          showError("phone", "å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ï¼ˆä¾‹: 090-1234-5678ï¼‰");
          return false;
        }

        showSuccess("phone");
        console.log("âœ“ é›»è©±ç•ªå·: OK");
        return true;
      }

      // ===== éƒµä¾¿ç•ªå·ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validateZip() {
        const value = zipInput.value.trim();

        if (value.length === 0) {
          clearValidation("zip");
          return false;
        }

        if (!patterns.zip.test(value)) {
          showError("zip", "å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ï¼ˆä¾‹: 123-4567ï¼‰");
          return false;
        }

        showSuccess("zip");
        console.log("âœ“ éƒµä¾¿ç•ªå·: OK");
        return true;
      }

      // ===== ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ =====
      function validatePassword() {
        const value = passwordInput.value;

        // å„è¦ä»¶ã‚’ãƒã‚§ãƒƒã‚¯
        const hasLength = value.length >= 8;
        const hasUppercase = patterns.hasUppercase.test(value);
        const hasLowercase = patterns.hasLowercase.test(value);
        const hasNumber = patterns.hasNumber.test(value);

        // è¦ä»¶ã®è¡¨ç¤ºã‚’æ›´æ–°
        updateRequirement("req-length", hasLength);
        updateRequirement("req-uppercase", hasUppercase);
        updateRequirement("req-lowercase", hasLowercase);
        updateRequirement("req-number", hasNumber);

        // å…¨ã¦ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        const allValid = hasLength && hasUppercase && hasLowercase && hasNumber;

        if (value.length === 0) {
          clearValidation("password");
          return false;
        }

        if (!allValid) {
          passwordInput.classList.add("invalid");
          passwordInput.classList.remove("valid");
          document.getElementById("passwordSuccess").classList.remove("show");
          return false;
        }

        showSuccess("password");
        console.log("âœ“ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: OKï¼ˆå…¨ã¦ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã™ï¼‰");
        return true;
      }

      // ===== ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¦ä»¶ã®è¡¨ç¤ºã‚’æ›´æ–° =====
      function updateRequirement(id, isMet) {
        const element = document.getElementById(id);
        if (isMet) {
          element.classList.add("met");
          element.classList.remove("unmet");
          element.textContent = element.textContent.replace("âœ—", "âœ“");
        } else {
          element.classList.add("unmet");
          element.classList.remove("met");
          element.textContent = element.textContent.replace("âœ“", "âœ—");
        }
      }

      // ===== ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š =====
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼å
      usernameInput.addEventListener("blur", validateUsername);
      usernameInput.addEventListener("input", function () {
        if (usernameInput.value.length > 0) validateUsername();
      });

      // é›»è©±ç•ªå·
      phoneInput.addEventListener("blur", validatePhone);
      phoneInput.addEventListener("input", function () {
        if (phoneInput.value.length > 0) validatePhone();
      });

      // éƒµä¾¿ç•ªå·
      zipInput.addEventListener("blur", validateZip);
      zipInput.addEventListener("input", function () {
        if (zipInput.value.length > 0) validateZip();
      });

      // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¦ä»¶ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
      passwordInput.addEventListener("input", validatePassword);

      // ===== ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ =====
      form.addEventListener("submit", function (event) {
        event.preventDefault();

        console.log("=== ãƒ•ã‚©ãƒ¼ãƒ ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ ===");

        // å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        const usernameValid = validateUsername();
        const phoneValid = validatePhone();
        const zipValid = validateZip();
        const passwordValid = validatePassword();

        const allValid =
          usernameValid && phoneValid && zipValid && passwordValid;

        if (allValid) {
          console.log("\nğŸ‰ å…¨ã¦ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«æˆåŠŸï¼");

          const formData = new FormData(form);
          const data = Object.fromEntries(formData);
          console.log("ç™»éŒ²ãƒ‡ãƒ¼ã‚¿:", data);

          alert("ç™»éŒ²æˆåŠŸï¼\nå…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ­£ã—ãæ¤œè¨¼ã•ã‚Œã¾ã—ãŸã€‚");
        } else {
          console.log("\nâŒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™");
          alert("å…¥åŠ›å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚èµ¤ã„æ ç·šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
        }
      });

      // ===== ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ =====
      console.log("ğŸ¯ æ­£è¦è¡¨ç¾ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ");
      console.log("\nã€ä½¿ç”¨ã—ã¦ã„ã‚‹æ­£è¦è¡¨ç¾ã€‘");
      console.log("1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å: /^[a-zA-Z0-9_]+$/");
      console.log("   â†’ è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿");
      console.log("\n2. é›»è©±ç•ªå·: /^[0-9]{3}-[0-9]{4}-[0-9]{4}$/");
      console.log("   â†’ 090-1234-5678 ã®å½¢å¼");
      console.log("\n3. éƒµä¾¿ç•ªå·: /^[0-9]{3}-[0-9]{4}$/");
      console.log("   â†’ 123-4567 ã®å½¢å¼");
      console.log("\n4. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:");
      console.log("   - /[A-Z]/: å¤§æ–‡å­—ã‚’å«ã‚€");
      console.log("   - /[a-z]/: å°æ–‡å­—ã‚’å«ã‚€");
      console.log("   - /[0-9]/: æ•°å­—ã‚’å«ã‚€");
      console.log("   - length >= 8: 8æ–‡å­—ä»¥ä¸Š");
      console.log("\nã€æ­£è¦è¡¨ç¾ã®è¨˜å·ã®æ„å‘³ã€‘");
      console.log("^ : æ–‡å­—åˆ—ã®å…ˆé ­");
      console.log("$ : æ–‡å­—åˆ—ã®æœ«å°¾");
      console.log("[0-9] : æ•°å­—");
      console.log("[a-z] : å°æ–‡å­—");
      console.log("[A-Z] : å¤§æ–‡å­—");
      console.log("{3} : ã¡ã‚‡ã†ã©3å›");
      console.log("+ : 1å›ä»¥ä¸Š");
      console.log("\nå®Ÿéš›ã«å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„:");
      console.log("- ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«è¨˜å·ã‚’å…¥ã‚Œã‚‹ â†’ ã‚¨ãƒ©ãƒ¼");
      console.log("- é›»è©±ç•ªå·ã‚’ 09012345678ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰â†’ ã‚¨ãƒ©ãƒ¼");
      console.log("- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ã‚’å…¨ã¦å«ã‚ã‚‹ â†’ æˆåŠŸ");
    </script>
  </body>
</html>
